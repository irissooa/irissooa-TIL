<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  <div id="app">
    <h1>Cat Image</h1>
    <img :src="catImage" alt="catimage" v-if='catImage' width='300'>
    <br>
    <button @click='getCatImgUrl'>Get Cat</button>
  </div>
  <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
  <!-- 개발버전, 도움되는 콘솔 경고를 포함. -->
  <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
  <script>
    const app = new Vue({
      el:'#app',
      data:{
        // 초기데이터를 넣어줘도됨, 예를들어 다른 고양이 사진 주소복붙
        catImage:''
      },
      methods:{
        getCatImgUrl: function (){
      // 1. 랜덤으로 고양이 이미지 url을 만든다 
      // 2. api에다가 요청보내서 응답받은 데이터안에 있는 url을 꺼낸다
      // 3. img에 요청받은 url을 넣는다
        
          // 변수 만들어서 넣어도 되고, 아니면 바로 적어도 됨
          // const API_URL = 'https://api.thecatapi.com/v1/images/search'
          // 요청을 보내서
          axios.get('https://api.thecatapi.com/v1/images/search').then((res)=>{
            // 데이터가 어떻게 생겼는지 먼저 확인을 해야됨!
            console.log(res.data)
            // console.log(this)
            // 왜 화살표함수? function일 때 this는 window라는 전역객체로 출력이 되고 있다.
            //  근데 화살표함수로 바꾼 뒤 this는 vue라는 인스턴스로 표시 됨 
            // 그렇기 때문에 화살표함수를 써야 뷰인스턴스의 data의 catimag에 할당이 되는데 
            // function이라고 쓰면 window전역객체이기때문에 할당이 되지 않는다.
              // 1. function키워드로 선언하는경우 -> 2번이 아닌 모든 경우 => 이렇게 써봤더니 this가 window? 화살표함수 써야됨
              // 2. 화살표 함수 - > 익명함수(콜백)를 쓸 떄 사용(모든경우가 그렇다고 말하기힘듦) -> 이렇게 써봤더니 this가 window? function키워드 써야됨
              // 중요한차이가 있는 경우 -> this를 함수안에서 쓸때(console.log를 했을 때 vue인스턴스로 나와야됨) 문제가 발생함 그렇지 않을때는 1,2번 상관없음
            this.catImage = res.data[0].url
          })
          // 받은 응답 중 url을 찾는다

          }
        }
    })
  </script>
</body>
</html>